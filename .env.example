# ============================================
# NIDS in a Box (NIB) Configuration
# ============================================
# Copy this file to .env and customize values
# ============================================

# ==================== Grafana ====================
# Leave empty or CHANGE_ME to auto-generate secure password on install
GRAFANA_ADMIN_PASSWORD=CHANGE_ME
# Port 3001 to avoid conflict with SIB Grafana on 3000
GRAFANA_PORT=3001
GRAFANA_BIND=0.0.0.0

# ==================== Suricata ====================
# Network interface to monitor
SURICATA_INTERFACE=eth0
# Home network definition (RFC1918 by default)
HOME_NET=[192.168.0.0/16,10.0.0.0/8,172.16.0.0/12]
# Additional Suricata CLI options (advanced)
# SURICATA_OPTIONS=-i eth0 --af-packet

# ==================== CrowdSec ====================
# Bouncer mode:
#   local  - iptables bouncer on this host (default)
#   sensor - no local bouncer, expose LAPI for remote bouncers (router, CDN, etc.)
BOUNCER_MODE=local

# API port
CROWDSEC_API_PORT=8080
# local mode: bind to localhost only
# sensor mode: bind to 0.0.0.0 so remote bouncers can connect
CROWDSEC_API_BIND=127.0.0.1
# Enrollment key from https://app.crowdsec.net (optional, enables community blocklists)
# CROWDSEC_ENROLL_KEY=your-enrollment-key
CROWDSEC_INSTANCE_NAME=nib
# Bouncer API key (auto-generated on install)
CROWDSEC_BOUNCER_KEY=

# ==================== Router Sync (sensor mode) ====================
# Push CrowdSec decisions to a remote router/firewall
# Only used with BOUNCER_MODE=sensor
#
# Bouncer API key for router sync (generate with: make add-router-bouncer)
# CROWDSEC_LAPI_KEY=
#
# Router type: mikrotik, opnsense, pfsense, openwrt, omada, generic
# ROUTER_TYPE=mikrotik
# ROUTER_URL=https://192.168.1.1
# ROUTER_USER=admin
# ROUTER_PASS=your-password
# ROUTER_LIST_NAME=nib-blocklist
# ROUTER_VERIFY_SSL=false
# SYNC_INTERVAL=60
# STATE_DIR=/var/lib/nib

# ==================== TP-Link Omada (sensor mode) ====================
# Push CrowdSec decisions to Omada-managed gateways via IP Groups
# Requires: Omada SDN Controller 5.0+, managed gateway (ER series)
#
# ROUTER_TYPE=omada
# OMADA_URL=https://192.168.1.10:8043      # Controller URL
# OMADA_USER=admin                          # Controller admin user
# OMADA_PASS=your-password                  # Controller password
# OMADA_SITE=Default                        # Site name
# OMADA_GROUP_NAME=nib-blocklist            # IP Group name for blocked IPs
# OMADA_VERIFY_SSL=false                    # Set true if using valid certs
#
# After sync, create an ACL rule in Omada:
#   Gateway → ACL → Add Rule:
#     Source: IP Group "nib-blocklist"
#     Action: Deny
#     Status: Enable

# ==================== Privacy ====================
# Privacy mode controls what Vector ships to storage (and Grafana):
#   full        - All event types (alerts, DNS, HTTP, TLS, flows, stats)
#   alerts-only - Only IDS alerts + stats (no protocol metadata in storage)
#                 Alert events also have app-layer fields stripped
#                 NOTE: Suricata still logs everything (CrowdSec needs it)
#                 NOTE: DNS Analysis and TLS dashboards will be empty
PRIVACY_MODE=full

# ==================== Storage ====================
VICTORIALOGS_PORT=9428
VICTORIALOGS_RETENTION=168h
STORAGE_BIND=127.0.0.1

# ==================== Timezone ====================
TZ=UTC
